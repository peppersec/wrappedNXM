(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{843:function(t,e,n){"use strict";n.r(e);n(57);var r=n(9),o=n(25),c=n(45),l={props:{value:{type:String,required:!0}},data:function(){return{selectedNetwork:this.value,networks:c.a}},methods:{updateNetwork:function(){this.$emit("input",this.selectedNetwork)}}},d=n(48),m={components:{NetworkSelect:Object(d.a)(l,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-select",{staticClass:"network-select",attrs:{placeholder:"Select a network",size:"is-small",expanded:""},on:{input:function(e){return t.updateNetwork()}},model:{value:t.selectedNetwork,callback:function(e){t.selectedNetwork=e},expression:"selectedNetwork"}},t._l(t.networks,function(e){return n("option",{key:e.networkName,domProps:{value:e.networkName.toLowerCase()}},[t._v("\n    "+t._s(e.networkName)+"\n  ")])}),0)},[],!1,null,null,null).exports},data:function(){return{isBackuped:!1,preparingModal:null,loading:!1,message:"Loading...",portisNetwork:"mainnet",squarelinkNetwork:"mainnet",authereumNetwork:"mainnet"}},computed:{},methods:{_web3Connect:function(){var t=Object(r.a)(regeneratorRuntime.mark(function t(e,n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,t.next=3,this.$store.dispatch("metamask/askPermission",{providerName:e,networkName:n});case 3:this.$parent.close();case 4:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()}},v=Object(d.a)(m,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"modal-card"},[t._m(0),t._v(" "),n("section",{staticClass:"modal-card-body"},[n("div",{staticClass:"field is-grouped is-grouped-centered is-grouped-multiline wallets"},[n("div",{staticClass:"control"},[n("button",{staticClass:"button is-small is-dark is-metamask",on:{click:function(e){return t._web3Connect("metamask")}}},[t._v("\n          Metamask\n        ")])]),t._v(" "),n("div",{staticClass:"control control-with-select"},[n("button",{staticClass:"button is-small is-dark is-portis",on:{click:function(e){return t._web3Connect("portis",t.portisNetwork)}}},[t._v("\n          Portis\n        ")]),t._v(" "),n("NetworkSelect",{model:{value:t.portisNetwork,callback:function(e){t.portisNetwork=e},expression:"portisNetwork"}})],1),t._v(" "),n("div",{staticClass:"control control-with-select"},[n("button",{staticClass:"button is-small is-dark is-authereum",on:{click:function(e){return t._web3Connect("authereum",t.authereumNetwork)}}},[t._v("\n          Authereum\n        ")]),t._v(" "),n("NetworkSelect",{model:{value:t.authereumNetwork,callback:function(e){t.authereumNetwork=e},expression:"authereumNetwork"}})],1),t._v(" "),n("div",{staticClass:"control control-with-select"},[n("button",{staticClass:"button is-small is-dark is-squarelink",on:{click:function(e){return t._web3Connect("squarelink",t.squarelinkNetwork)}}},[t._v("\n          Squarelink\n        ")]),t._v(" "),n("NetworkSelect",{model:{value:t.squarelinkNetwork,callback:function(e){t.squarelinkNetwork=e},expression:"squarelinkNetwork"}})],1)])]),t._v(" "),n("b-loading",{attrs:{active:t.loading},on:{"update:active":function(e){t.loading=e}}},[n("div",{staticClass:"loading-container"},[n("div",{staticClass:"loading-tornado"}),t._v(" "),n("div",{staticClass:"loading-message"},[t._v("\n        "+t._s(t.message)+"...\n      ")])])])],1)},[function(){var t=this.$createElement,e=this._self._c||t;return e("header",{staticClass:"modal-card-head"},[e("p",{staticClass:"modal-card-title"},[this._v("\n      Please select your Web3 Wallet\n    ")])])}],!1,null,null,null).exports,h=n(161),k={data:function(){return{amount:"",clicked:!1,canWrap:{status:null,reason:""},canUnwrap:{status:null,reason:""}}},computed:Object(o.a)({},Object(h.d)("metamask",["balance","ethAccount"]),Object(h.d)("token",["txs"]),Object(h.c)("metamask",["networkName","currency"]),{address:{get:function(){return this.$store.state.metamask.address.value},set:function(address){this.$store.dispatch("metamask/setAddress",{address:address})}},isAddressValid:{get:function(){return this.$store.state.metamask.address.valid}},tokenBalance:{get:function(){return this.$store.state.token.balance}},NXMtokenBalance:{get:function(){return this.$store.state.token.NXMbalance}},tokenAddress:{get:function(){return this.$store.state.token.address}}}),watch:{address:function(){var t=Object(r.a)(regeneratorRuntime.mark(function t(e){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.$validator.validate("address",e),!e){t.next=10;break}return t.next=4,this.$store.dispatch("token/canWrap",{account:this.address,amount:this.amount});case 4:return n=t.sent,this.canWrap={status:n.isPassed,reason:n.reason},t.next=8,this.$store.dispatch("token/canUnwrap",{recipient:this.address,amount:this.amount});case 8:r=t.sent,this.canUnwrap={status:r.isPassed,reason:r.reason};case 10:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),amount:function(){var t=Object(r.a)(regeneratorRuntime.mark(function t(e){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.$validator.validate("amount",e),!this.address){t.next=11;break}return t.next=4,this.$store.dispatch("token/canWrap",{account:this.address,amount:this.amount});case 4:return n=t.sent,this.canWrap={status:n.isPassed,reason:n.reason},t.next=8,this.$store.dispatch("token/canUnwrap",{recipient:this.address,amount:this.amount});case 8:r=t.sent,this.canUnwrap={status:r.isPassed,reason:r.reason},console.log("canUnwrap",r);case 11:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},created:function(){var t=this;this.$validator.extend("valid_address",{getMessage:function(t){return"The ".concat(t," must be valid.")},validate:function(){return!!t.isAddressValid}})},mounted:function(){var t=this;window.onload=function(){t.$store.dispatch("metamask/fetchGasPrice",{})}},methods:Object(o.a)({},Object(h.b)("token",["wrapTokens","approve","unwrapTokens"]),{makeUrl:function(t){var e=this.$store.getters["metamask/networkConfig"];return"".concat(e.explorerUrl.tx,"/tx/").concat(t)},addressUrl:function(address){var t=this.$store.getters["metamask/networkConfig"];return"".concat(t.explorerUrl.tx,"/address/").concat(address)},onConnectWeb3:function(){this.$modal.open({parent:this,component:v,hasModalCard:!0,width:440})},validateBeforeSubmit:function(){var t=this;this.clicked=!0,this.$validator.validateAll().then(function(){var e=Object(r.a)(regeneratorRuntime.mark(function e(n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=6;break}return e.next=3,t.wrapTokens({amount:t.amount});case 3:return t.$toast.open({message:"Success",type:"is-success",position:"is-top"}),t.clicked=!1,e.abrupt("return");case 6:t.$toast.open({message:"Please check the fields.",type:"is-danger",position:"is-top"}),t.clicked=!1;case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),this.clicked=!1},unwrap:function(){var t=this;this.clicked=!0,this.$validator.validateAll().then(function(){var e=Object(r.a)(regeneratorRuntime.mark(function e(n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=6;break}return e.next=3,t.unwrapTokens({to:t.address,amount:t.amount});case 3:return t.$toast.open({message:"Success",type:"is-success",position:"is-top"}),t.clicked=!1,e.abrupt("return");case 6:t.$toast.open({message:"Please check the fields.",type:"is-danger",position:"is-top"}),t.clicked=!1;case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())},sendApprove:function(){var t=this;this.clicked=!0,this.$validator.validateAll().then(function(){var e=Object(r.a)(regeneratorRuntime.mark(function e(n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=6;break}return e.next=3,t.approve({amount:t.amount});case 3:return t.$toast.open({message:"Success",type:"is-success",position:"is-top"}),t.clicked=!1,e.abrupt("return");case 6:t.$toast.open({message:"Please check the fields.",type:"is-danger",position:"is-top"}),t.clicked=!1;case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())}})},f=Object(d.a)(k,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"columns"},[n("div",{staticClass:"column is-two-thirds-tablet is-half-desktop"},[n("h1",{staticClass:"title"},[t._v("\n      wNXM Token\n    ")]),t._v(" "),n("h2",{staticClass:"subtitle"},[t._v("\n      Wrap/Unwrap tokens to an address\n    ")]),t._v(" "),n("div",{staticClass:"fields"},[n("b-field",{staticClass:"field-height",attrs:{label:"Address",type:{"is-danger":t.errors.has("address")},message:t.errors.first("address")}},[n("b-input",{directives:[{name:"validate",rawName:"v-validate",value:{required:!0,max:42,valid_address:!0},expression:"{ required: true, max: 42, valid_address: true }"}],attrs:{name:"address",placeholder:"0x00000...",maxlength:"42"},model:{value:t.address,callback:function(e){t.address=e},expression:"address"}})],1),t._v(" "),n("b-field",{staticClass:"field-height",attrs:{label:"Amount",type:{"is-danger":t.errors.has("amount")},message:t.errors.first("amount")}},[n("b-input",{directives:[{name:"validate",rawName:"v-validate",value:{required:!0,numeric:!0},expression:"{ required: true, numeric: true }"}],attrs:{type:"number",name:"amount",placeholder:"1"},model:{value:t.amount,callback:function(e){t.amount=e},expression:"amount"}})],1),t._v(" "),n("div",{staticClass:"level is-mobile"},[t.ethAccount?n("button",{staticClass:"button is-primary",attrs:{disabled:t.clicked},on:{click:function(e){return e.preventDefault(),t.validateBeforeSubmit(e)}}},[t._v("\n          Wrap\n        ")]):t._e(),t._v(" "),t.ethAccount?n("button",{staticClass:"button is-primary",attrs:{disabled:t.clicked},on:{click:function(e){return e.preventDefault(),t.sendApprove(e)}}},[t._v("\n          Approve\n        ")]):t._e(),t._v(" "),t.ethAccount?n("button",{staticClass:"button is-primary",attrs:{disabled:t.clicked},on:{click:function(e){return e.preventDefault(),t.unwrap(e)}}},[t._v("\n          UnWrap\n        ")]):n("button",{staticClass:"button is-primary",on:{click:function(e){return e.preventDefault(),t.onConnectWeb3(e)}}},[t._v("\n          Connect\n        ")]),t._v(" "),t._m(0)])],1),t._v(" "),t.ethAccount?n("div",{staticClass:"info columns is-multiline"},[n("div",{staticClass:"column"},[n("p",{staticClass:"heading"},[t._v("\n          NXM Balance\n        ")]),t._v(" "),n("p",{staticClass:"title"},[t._v("\n          "+t._s(t.NXMtokenBalance)+" NXM\n        ")])]),t._v(" "),n("div",{staticClass:"column"},[n("p",{staticClass:"heading"},[t._v("\n          wNXM Balance\n        ")]),t._v(" "),n("p",{staticClass:"title"},[t._v("\n          "+t._s(t.tokenBalance)+" wNXM\n        ")])]),t._v(" "),n("div",{staticClass:"column"},[n("p",{staticClass:"heading"},[t._v("\n          Can Wrap\n        ")]),t._v(" "),n("p",{staticClass:"title"},[t._v("\n          "+t._s(t.canWrap.status?"Yes":null!==t.canWrap.status?"No":"")+"\n          "),t.canWrap.status||null===t.canWrap.status?t._e():n("span",{staticClass:"red"},[t._v(t._s(t.canWrap.reason))])])]),t._v(" "),n("div",{staticClass:"column"},[n("p",{staticClass:"heading"},[t._v("\n          Can UnWrap\n        ")]),t._v(" "),n("p",{staticClass:"title"},[t._v("\n          "+t._s(t.canUnwrap.status?"Yes":null!==t.canUnwrap.status?"No":"")+"\n          "),t.canUnwrap.status||null===t.canUnwrap.status?t._e():n("span",{staticClass:"red"},[t._v(t._s(t.canUnwrap.reason))])])]),t._v(" "),n("div",{staticClass:"column is-12"},[n("p",{staticClass:"heading"},[t._v("\n          ETH Account\n        ")]),t._v(" "),n("p",{staticClass:"title"},[n("a",{staticClass:"title",attrs:{href:t.addressUrl(t.ethAccount),target:"_blank"}},[t._v("\n            "+t._s(t.ethAccount)+"\n          ")])])]),t._v(" "),n("div",{staticClass:"column is-12"},[n("p",{staticClass:"heading"},[t._v("\n          Token Address\n        ")]),t._v(" "),n("p",{staticClass:"title"},[n("a",{staticClass:"title",attrs:{href:t.addressUrl(t.tokenAddress),target:"_blank"}},[t._v("\n            "+t._s(t.tokenAddress)+"\n          ")])])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.txs.length>0,expression:"txs.length > 0"}],staticClass:"column is-12"},[n("p",{staticClass:"heading"},[t._v("\n          Sent transactions\n        ")]),t._v(" "),n("b-field",{staticClass:"explorer",attrs:{grouped:"","group-multiline":""}},t._l(t.txs,function(e,r){return n("p",{key:r,staticClass:"control"},[n("a",{attrs:{href:t.makeUrl(e),target:"_blank"}},[t._v("\n              "+t._s(t.makeUrl(e))+"\n            ")])])}),0)],1)]):t._e()])])},[function(){var t=this.$createElement,e=this._self._c||t;return e("a",{staticClass:"is-flex",attrs:{href:"https://peppersec.com",target:"_blank"}},[e("span",{staticClass:"icon icon-madeby"})])}],!1,null,null,null);e.default=f.exports}}]);